package org.engcia.bayessample

import org.sibac.bayes.model.FactBayes;
import org.sibac.bayes.model.Evidence;
import org.sibac.bayes.model.Hypothesis;
import org.sibac.bayes.listeners.TrackingAgendaListener
import org.sibac.bayes.model.Conclusion
import org.sibac.bayes.model.FrameProduct
import org.sibac.bayes.model.FrameTeam;

rule "Do you know your needs? No"

salience 4
/*lock-on-active true*/
when
	Evidence( description == "Do you know what your business needs?", value == "no" )
then
	System.out.println("rule r1 triggered");
	insert(new Hypothesis(1.0, "Frame: Product-constrained", "yes"));
end

rule "Frame:Product-constrained, what is your TRL?"
salience 3
/*lock-on-active true*/
when
	Hypothesis(description == "Frame: Product-constrained", value == "yes")
	$FrameProduct : FrameProduct(probability==1.0, description == "What is your TRL? [value 1-4]", $value : value )
then
    System.out.println("rule r2 triggered");
    insert(new Conclusion("You current succcess probability based on TRL is " + $FrameProduct.getScore() * 100 + "%. Try identifying what your business needs and try again!"));
end


rule "Do you know your needs? Yes"

salience 4
/*lock-on-active true*/
when
	Evidence( description == "Do you know what your business needs?", value == "yes" )
then
	System.out.println("rule r1 triggered yes");
	insert(new Hypothesis(1.0, "Frame: Team", "yes"));
	insert(new FrameTeam(1.0, "Frame: Team", "yes"));
end


rule "Frame: Team"
salience 3
/*lock-on-active true*/
when
	Hypothesis(description == "Frame: Team", value == "yes")
	$TS : Evidence(probability==1.0, description == "Do you have the technical skills?", $TSvalue : value )
	$AS : Evidence(probability==1.0, description == "Do you have the analytical skills?", $ASvalue : value )
	$MS : Evidence(probability==1.0, description == "Do you have the marketing skills?", $MSvalue : value )
	$Experience : Evidence(probability==1.0, description == "Do you have previous experience as a team?", $EXPvalue : value )
	$Goals : Evidence(probability==1.0, description == "Are your personal goals aligned with the start-up vision?", $GOALvalue : value )
	$Expertise : Evidence(probability==1.0, description == "Do your team or advisors have industry expertise?", $EXPERTISEvalue : value )
    $FrameTeam : FrameTeam()

then
    System.out.println("rule r2 triggered yes");
    System.out.println($TSvalue);
    System.out.println($ASvalue);
    System.out.println($MSvalue);
    System.out.println($EXPvalue);
    System.out.println($GOALvalue);
    System.out.println($EXPERTISEvalue);


    System.out.println($FrameTeam.calculateTeamScore($TSvalue, $ASvalue, $MSvalue, $GOALvalue, $EXPvalue, $EXPERTISEvalue));

end



